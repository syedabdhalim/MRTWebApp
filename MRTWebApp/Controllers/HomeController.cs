using MRTWebApp.Models;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MRTWebApp.Controllers
{
    public class HomeController : Controller
    {
        [HttpGet]
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ViewResult Index(MRT mrt)
        {
            if (ModelState.IsValid)
            {
                double[,] rate =
            {
                {0.8,1.2,1.8,2.0,2.6,2.7,3.1,3.3,3.2,3.5,3.3,3.4,3.1,3.2,3.3,3.4,3.5,3.6,3.7,3.9,4.0,4.1,4.3,4.5,4.6,4.8,4.8,5.0,5.3,5.4,5.5},
                {1.2,0.8,1.5,1.8,2.3,2.7,2.8,3.1,3.4,3.3,3.7,3.3,3.7,3.8,3.2,3.3,3.4,3.5,3.6,3.8,3.9,4.0,4.2,4.4,4.5,4.6,4.7,4.9,5.2,5.2,5.4},
                {1.8,1.5,0.8,1.1,1.8,2.1,2.6,2.6,3.0,3.2,3.3,3.5,3.4,3.5,3.6,3.7,3.2,3.3,3.4,3.5,3.6,3.8,3.9,4.1,4.3,4.4,4.5,4.6,4.9,5.0,5.1},
                {2.0,1.8,1.1,0.8,1.6,1.9,2.3,2.6,2.8,3.0,3.1,3.3,3.8,3.4,3.4,3.6,3.8,3.2,3.3,3.4,3.5,3.7,3.8,4.0,4.1,4.3,4.4,4.5,4.8,4.9,5.0},
                {2.6,2.3,1.8,1.6,0.8,1.3,1.8,2.0,2.4,2.8,3.0,3.2,3.3,3.5,3.6,3.2,3.4,3.6,3.7,3.2,3.2,3.4,3.5,3.7,3.9,4.0,4.1,4.3,4.6,4.6,4.8},
                {2.7,2.7,2.1,1.9,1.3,0.8,1.3,1.7,2.0,2.4,2.7,2.9,3.1,3.3,3.4,3.6,3.8,3.4,3.5,3.7,3.8,3.2,3.4,3.6,3.7,3.9,4.0,4.1,4.4,4.5,4.6},
                {3.1,2.8,2.6,2.3,1.8,1.3,0.8,1.3,1.7,2.0,2.6,2.8,3.2,3.4,3.1,3.3,3.5,3.7,3.2,3.5,3.6,3.8,3.2,3.4,3.6,3.7,3.8,3.9,4.2,4.3,4.4},
                {3.3,3.1,2.6,2.6,2.0,1.7,1.3,0.8,1.3,1.7,2.2,2.5,2.9,3.1,3.2,3.4,3.2,3.4,3.6,3.3,3.4,3.6,3.8,3.3,3.4,3.6,3.6,3.8,4.1,4.2,4.3},
                {3.2,3.4,3.0,2.8,2.4,2.0,1.7,1.3,0.8,1.2,1.8,2.1,2.8,2.8,2.9,3.1,3.4,3.1,3.3,3.6,3.7,3.4,3.6,3.8,3.2,3.4,3.5,3.6,3.9,4.0,4.1},
                {3.5,3.3,3.2,3.0,2.8,2.4,2.0,1.7,1.2,0.8,1.6,1.8,2.5,2.7,2.6,2.8,3.1,3.3,3.1,3.3,3.5,3.7,3.4,3.6,3.8,3.2,3.3,3.5,3.8,3.9,4.0},
                {3.3,3.7,3.3,3.1,3.0,2.7,2.6,2.2,1.8,1.6,0.8,1.1,1.8,2.1,2.2,2.5,2.8,2.8,3.0,3.3,3.5,3.3,3.5,3.3,3.5,3.7,3.8,3.2,3.5,3.6,3.7},
                {3.4,3.3,3.5,3.3,3.2,2.9,2.8,2.5,2.1,1.8,1.1,0.8,1.7,1.9,2.0,2.3,2.6,2.6,2.8,3.1,3.3,3.1,3.4,3.7,3.3,3.5,3.6,3.1,3.4,3.5,3.6},
                {3.1,3.7,3.4,3.8,3.3,3.1,3.2,2.9,2.8,2.5,1.8,1.7,0.8,1.2,1.3,1.6,1.9,2.1,2.3,2.7,2.7,3.0,3.3,3.2,3.4,3.7,3.2,3.5,3.1,3.2,3.3},
                {3.2,3.8,3.5,3.4,3.5,3.3,3.4,3.1,2.8,2.7,2.1,1.9,1.2,0.8,1.0,1.3,1.7,1.8,2.1,2.5,2.7,2.8,3.0,3.5,3.3,3.5,3.6,3.3,3.7,3.8,3.2},
                {3.3,3.2,3.6,3.4,3.6,3.4,3.1,3.2,2.9,2.6,2.2,2.0,1.3,1.0,0.8,1.1,1.5,1.8,1.9,2.3,2.5,2.6,2.9,3.3,3.2,3.4,3.5,3.8,3.6,3.7,3.2},
                {3.4,3.3,3.7,3.6,3.2,3.6,3.3,3.4,3.1,2.8,2.5,2.3,1.6,1.3,1.1,0.8,1.2,1.5,1.8,2.1,2.3,2.6,2.7,3.1,3.4,3.2,3.3,3.6,3.5,3.6,3.8},
                {3.5,3.4,3.2,3.8,3.4,3.8,3.5,3.2,3.4,3.1,2.8,2.6,1.9,1.7,1.5,1.2,0.8,1.1,1.4,1.8,1.9,2.3,2.7,2.9,3.1,3.4,3.1,3.4,3.3,3.4,3.6},
                {3.6,3.5,3.3,3.2,3.6,3.4,3.7,3.4,3.1,3.3,2.8,2.6,2.1,1.8,1.8,1.5,1.1,0.8,1.1,1.5,1.8,2.1,2.4,2.6,2.9,3.2,3.3,3.2,3.7,3.3,3.4},
                {3.7,3.6,3.4,3.3,3.7,3.5,3.2,3.6,3.3,3.1,3.0,2.8,2.3,2.1,1.9,1.8,1.4,1.1,0.8,1.3,1.5,1.8,2.2,2.7,2.7,3.0,3.2,3.1,3.6,3.7,3.3},
                {3.9,3.8,3.5,3.4,3.2,3.7,3.5,3.3,3.6,3.3,3.3,3.1,2.7,2.5,2.3,2.1,1.8,1.5,1.3,0.8,1.1,1.5,1.8,2.3,2.6,2.7,2.8,3.2,3.3,3.4,3.6},
                {4.0,3.9,3.6,3.5,3.2,3.8,3.6,3.4,3.7,3.5,3.5,3.3,2.7,2.7,2.5,2.3,1.9,1.8,1.5,1.1,0.8,1.3,1.7,2.1,2.4,2.8,2.7,3.0,3.1,3.3,3.5},
                {4.1,4.0,3.8,3.7,3.4,3.2,3.8,3.6,3.4,3.7,3.3,3.1,3.0,2.8,2.6,2.6,2.3,2.1,1.8,1.5,1.3,0.8,1.2,1.8,2.0,2.4,2.6,2.7,3.3,3.4,3.2},
                {4.3,4.2,3.9,3.8,3.5,3.4,3.2,3.8,3.6,3.4,3.5,3.4,3.3,3.0,2.9,2.7,2.7,2.4,2.2,1.8,1.7,1.2,0.8,1.4,1.8,2.0,2.2,2.6,3.0,3.1,3.4},
                {4.5,4.4,4.1,4.0,3.7,3.6,3.4,3.3,3.8,3.6,3.3,3.7,3.2,3.5,3.3,3.1,2.9,2.6,2.7,2.3,2.1,1.8,1.4,0.8,1.2,1.6,1.8,2.1,2.6,2.7,3.0},
                {4.6,4.5,4.3,4.1,3.9,3.7,3.6,3.4,3.2,3.8,3.5,3.3,3.4,3.3,3.2,3.4,3.1,2.9,2.7,2.6,2.4,2.0,1.8,1.2,0.8,1.3,1.5,1.8,2.5,2.7,2.7},
                {4.8,4.6,4.4,4.3,4.0,3.9,3.7,3.6,3.4,3.2,3.7,3.5,3.7,3.5,3.4,3.2,3.4,3.2,3.0,2.7,2.8,2.4,2.0,1.6,1.3,0.8,1.1,1.5,2.2,2.3,2.7},
                {4.8,4.7,4.5,4.4,4.1,4.0,3.8,3.6,3.5,3.3,3.8,3.6,3.2,3.6,3.5,3.3,3.1,3.3,3.2,2.8,2.7,2.6,2.2,1.8,1.5,1.1,0.8,1.3,2.0,2.2,2.5},
                {5.0,4.9,4.6,4.5,4.3,4.1,3.9,3.8,3.6,3.5,3.2,3.1,3.5,3.3,3.8,3.6,3.4,3.2,3.1,3.2,3.0,2.7,2.6,2.1,1.8,1.5,1.3,0.8,1.7,1.8,2.1},
                {5.3,5.2,4.9,4.8,4.6,4.4,4.2,4.1,3.9,3.8,3.5,3.4,3.1,3.7,3.6,3.5,3.3,3.7,3.6,3.3,3.1,3.3,3.0,2.6,2.5,2.2,2.0,1.7,0.8,1.1,1.4},
                {5.4,5.2,5.0,4.9,4.6,4.5,4.3,4.2,4.0,3.9,3.6,3.5,3.2,3.8,3.7,3.6,3.4,3.3,3.7,3.4,3.3,3.4,3.1,2.7,2.7,2.3,2.2,1.8,1.1,0.8,1.2},
                {5.5,5.4,5.1,5.0,4.8,4.6,4.4,4.3,4.1,4.0,3.7,3.6,3.3,3.2,3.2,3.8,3.6,3.4,3.3,3.6,3.5,3.2,3.4,3.0,2.7,2.7,2.5,2.1,1.4,1.2,0.8}

            };

                IDictionary<int, string> dictOrigin = new Dictionary<int, string>()
            {
                {0, "Sungai Buloh" },
                {1, "Kampung Selamat" },
                {2, "Kwasa Damansara" },
                {3, "Kwasa Sentral" },
                {4, "Kota Damansara" },
                {5, "Srian" },
                {6, "Mutiara Damansara" },
                {7, "Bandar Utama" },
                {8, "Taman Dr Tun Ismail" },
                {9, "Phelio Damansara" },
                {10, "Pusat Bandar Damansara" },
                {11, "Semantan" },
                {12, "Muzium Negara" },
                {13, "Pasar Seni" },
                {14, "Merdeka" },
                {15, "Bukit Bintang" },
                {16, "Tun Razak Exchange" },
                {17, "Cochrane" },
                {18, "Maluri" },
                {19, "Taman Pertama" },
                {20, "Taman Midah" },
                {21, "Taman Mutiara" },
                {22, "Taman Connaught" },
                {23, "Taman Suntext" },
                {24, "Sri Raya" },
                {25, "Bandar Tun Hussein Onn" },
                {26, "Batu Sebelas Cheras" },
                {27, "Bukit Dukung" },
                {28, "Sungai Jernih" },
                {29, "Stadium Kajang" },
                {30, "Kajang" }
            };

                IDictionary<int, string> dictDestination = new Dictionary<int, string>()
            {
               {0, "Sungai Buloh" },
                {1, "Kampung Selamat" },
                {2, "Kwasa Damansara" },
                {3, "Kwasa Sentral" },
                {4, "Kota Damansara" },
                {5, "Surian" },
                {6, "Mutiara Damansara" },
                {7, "Bandar Utama" },
                {8, "Taman Dr Tun Ismail" },
                {9, "Phelio Damansara" },
                {10, "Pusat Bandar Damansara" },
                {11, "Semantan" },
                {12, "Muzium Negara" },
                {13, "Pasar Seni" },
                {14, "Merdeka" },
                {15, "Bukit Bintang" },
                {16, "Tun Razak Exchange" },
                {17, "Cochrane" },
                {18, "Maluri" },
                {19, "Taman Pertama" },
                {20, "Taman Midah" },
                {21, "Taman Mutiara" },
                {22, "Taman Connaught" },
                {23, "Taman Suntext" },
                {24, "Sri Raya" },
                {25, "Bandar Tun Hussein Onn" },
                {26, "Batu Sebelas Cheras" },
                {27, "Bukit Dukung" },
                {28, "Sungai Jernih" },
                {29, "Stadium Kajang" },
                {30, "Kajang" }
            };

                ViewBag.Quantity = mrt.Quantity;
                ViewBag.Name = mrt.Name;
                ViewBag.Email = mrt.Email;

                ViewBag.Rate = rate;
                ViewBag.DictOrigin = dictOrigin;
                ViewBag.DictDestination = dictDestination;
                int originIndex = int.Parse(mrt.Origin);
                ViewBag.Origin = dictOrigin[originIndex];
                int destinationIndex = int.Parse(mrt.Destination);
                ViewBag.Destination = dictDestination[destinationIndex];

                double fare = rate[originIndex, destinationIndex];
                ViewBag.Fare = fare;

                DateTime datetime = DateTime.Now;
                ViewBag.Datetime = datetime;
                return View("Result", mrt);
            }

            else
            {

                return View();
            }
        }
    }
}
